<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Game</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">

</head>
<body>

    <div id="invitePopup">
        <div id="invitePopupContent">
            <div id="invitePopupHeader"></div>
            <div id="choiceButtons">
                <button id="acceptInvite">Accept</button>
                <button id="rejectInvite">Reject</button>
            </div>
        </div>
    </div>

    <div id="profile" style="display:none;">
        <div id="profile-picture"></div>
        <div id="username"></div>
    </div>

    <!-- Username Setup Component for New Users -->
    <username-setup-component id="usernameSetup" style="display:none;"></username-setup-component>

    <!-- Profile Popup Overlay -->
    <div id="profilePopupOverlay">
        <div id="profilePopup">
            <button id="profileCloseBtn">âœ•</button>
            <div class="profile-content">
                <div class="profile-top">
                    <div id="playerProfilePicture"></div>
                    <div class="profile-info">
                        <div id="playerUsername"></div>
                        <div id="creationDate"></div>
                    </div>
                </div>
                <div class="about-me-section">
                    <div class="about-me-label">About Me</div>
                    <div id="aboutMeContent">No about me text yet.</div>
                </div>
                <div id="totalTypingTime">Total Typing Time: 00:00:00</div>
                <button id="viewFullProfileBtn">View Full Profile</button>
            </div>
        </div>
    </div>
    

    <div id="menu" style="display:none;">
        <div id="menu-content">
            <button id="friends">ðŸ‘¥</button>
            <button id="practice" class="modes">PRACTICE</button>
            <button id="pvp" class="modes">PVP</button>
            <button id="privateMatch" class="modes">PRIVATE MATCH</button>
            <button id="community" class="modes">COMMUNITY</button>
            <button id="settings" class="modes">SETTINGS</button>
        </div>
    </div>

    <!-- Friends Panel -->
    <div id="friendsPanel">
        <div id="friendsPanelContent">
            <div class="friends-header">
                <h2>Friends</h2>
                <button id="closeFriends">âœ•</button>
            </div>
            
            <!-- Friends Tabs -->
            <div class="friends-tabs">
                <button class="friends-tab active" data-tab="friends">Friends</button>
                <button class="friends-tab" data-tab="addFriends">Add Friends</button>
                <button class="friends-tab" data-tab="requests">Requests</button>
            </div>
            
            <!-- Friends Tab Content -->
            <div class="friends-tab-content active" id="friendsTab">
                <div id="friendsList">
                    <div class="no-friends">No friends yet</div>
                </div>
            </div>
            
            <!-- Add Friends Tab Content -->
            <div class="friends-tab-content" id="addFriendsTab">
                <!-- Search Section -->
                <div class="friends-search-section">
                    <input type="text" id="friendsSearchInput" placeholder="Search for users to add...">
                    <button id="friendsSearchBtn">Search</button>
                </div>
                
                <!-- Search Results Section -->
                <div id="friendsSearchResults">
                    <p style="text-align: center; color: #7f8c8d; font-style: italic; margin: 20px;">Enter a username above to search for users</p>
                </div>
            </div>
            
            <!-- Requests Tab Content -->
            <div class="friends-tab-content" id="requestsTab">
                <div id="friendRequestsList">
                    <div class="no-friends">No friend requests</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Settings Panel -->
    <div id="settingsPanel" style="display:none;">
        <div class="settings-content">
            <h2>Settings</h2>
            <div class="setting-group">
                <h3>Profile Picture</h3>
                <input type="file" id="profilePictureInput" accept="image/*">
            </div>
            <div class="setting-group">
                <h3>About Me</h3>
                <textarea id="aboutMeInput" placeholder="Tell us about yourself..." maxlength="200"></textarea>
                <div class="char-count">0/200</div>
            </div>
            <button id="closeSettings">Close</button>
        </div>
    </div>
    
    <div id="queue-animation-overlay"></div>
    <button id="queueBackBtn">Back</button>

    <!-- Queue Counter - Outside PvP Menu -->
    <div id="queue-counter" style="display:none;">PLAYERS IN QUEUE: 0</div>

    <!-- PvP Menu -->
    <div id="pvpmenu" style="display:none;">
        <div class="pvp-info">
            <h2>PVP RACE</h2>
            <p>Race another player to 25 words. Fastest wins!</p>
        </div>
        <div id="queueMenu">
            <button id="queueBtn">Find Match</button>
        </div>
    </div>

    <div id="match">
        <countdown-component></countdown-component>

        <finish-animation id="finish-animation-component"></finish-animation>

        <div id="pvp-results" class="match-overlay">
            <h2>Results</h2>
            <div class="stats">
                <p id="typingSpeed"></p>
                <p id="accuracy"></p>
            </div>
            <button onclick="backToMenu()" class="back-to-menu-btn">Back to Menu</button>
        </div>
        
                <div id="oppDisconnectScreen" class="match-overlay">
            <h2>Opponent Disconnected</h2>
            <p>Your opponent has left the match.</p>
            <button onclick="backToMenu()" class="back-to-menu-btn">Back to Menu</button>
        </div>

 

        <div id="playerTypingArea" class="typingArea">
            <div class="typing-area-label">You <span id="player-progress">0/50</span></div>
            <div id="pvp-player-container" class="pvp-typing-container"></div>
            <keyboard-component keyboard-id="player-keyboard"></keyboard-component>
        </div>
        <div id="oppTypingArea" class="typingArea">
            <div class="typing-area-label">Opponent <span id="opponent-progress">0/50</span></div>
            <div id="pvp-opponent-container" class="pvp-typing-container"></div>
            <keyboard-component keyboard-id="opp-keyboard"></keyboard-component>
        </div>



    </div>

    <div id="app">
        <div id="practice-results" class="match-overlay">
            <h2>Results</h2>
            <div class="stats">
                <p>Words Per Minute: <span id="practice-wpm" class="highlight"></span></p>
                <p>Accuracy: <span id="practice-accuracy" class="highlight"></span></p>
            </div>
            <button onclick="restartTest()" id="restart-test-btn">Try Again</button>
            <button onclick="backToMenu()" class="back-to-menu-btn">Back to Menu</button>


        </div>

        <button id="practice-back-btn" onclick="backToMenu()" class="back-to-menu-btn" style="display:none; position: fixed; top: 20px; left: 20px; z-index: 1000; margin-top: 0;">Back</button>

        <div id="word-settings">
                            <span class="word-count" data-count="5">5 words</span> |
            <span class="word-count" data-count="10">10 words</span> |
            <span class="word-count" data-count="25">25 words</span> |
            <span class="word-count" data-count="50">50 words</span> 
        </div>



        <div id="practice-container">
        </div>

        <div id="results-screen">
            <h2>Results</h2>
        </div>

        <keyboard-component></keyboard-component>
    </div>
    

    <script src="/socket.io/socket.io.js"></script>
    <script src="words.js"></script>
    <script src="finishAnimationComponent.js"></script>
    <script src="script.js"></script>
    <script src="keyboardComponent.js"></script>
    <script src="countdownComponent.js"></script>
    <script src="usernameSetupComponent.js"></script>

</body>
</html>